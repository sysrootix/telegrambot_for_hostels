# Telegram WebApp Bot Starter Guide

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–¥–µ—Ç—Å—è –Ω–∞ MacBook, –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ GitHub –∏ –∑–∞—Ç–µ–º –¥–µ–ø–ª–æ—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
- –≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ —Å—Ç–µ–∫—É, –ø—Ä–∞–≤–∏–ª–∞–º –∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º.
- –û—Å–Ω–æ–≤–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ VapeKHV, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Ö–æ–∂–∏–π Telegram WebApp –±–æ—Ç.

## –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
–ù–∏–∂–µ –≤–∫–ª—é—á–µ–Ω–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `CLAUDE.md`, –∫–æ—Ç–æ—Ä–æ–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø—Ä–∞–≤–∏–ª–∞ –∏ –¥–µ–ø–ª–æ–π.

# VapeKHV - Telegram Web App Store

–ò—Å–ø–æ–ª—å–∑—É–π context7.

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê –î–õ–Ø CLAUDE CODE

1. **–ö–û–ú–ú–ò–¢–´ –í GIT** - –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–∞ –¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç –≤ Git:
   ```bash
   git add .
   git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è" # –∏–ª–∏ fix: –¥–ª—è –±–∞–≥—Ñ–∏–∫—Å–æ–≤
   git push origin main
   ```

2. **–ú–ò–ì–†–ê–¶–ò–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•** - –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–≤–∞–π —Ñ–∞–π–ª `.md` —Å –∫–æ–º–∞–Ω–¥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ù–∞–ø—Ä–∏–º–µ—Ä:
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª migration-YYYY-MM-DD-–æ–ø–∏—Å–∞–Ω–∏–µ.md —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
   # 1. cd backend
   # 2. npx prisma migrate dev --name –Ω–∞–∑–≤–∞–Ω–∏–µ_–º–∏–≥—Ä–∞—Ü–∏–∏
   # 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
   ```



## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

VapeKHV - —ç—Ç–æ Telegram Web App –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ –≤–µ–π–ø-–ø—Ä–æ–¥—É–∫—Ü–∏–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤, –∫–æ—Ä–∑–∏–Ω–æ–π –∏ —Å–∏—Å—Ç–µ–º–æ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend
- **React 18.2** + **Vite 5** + **TypeScript 5.3**
- **Tailwind CSS 3.4** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram —Ç–µ–º—ã
- **Zustand 4.4** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å persistence)
- **React Query 5.15** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **React Router 6.21** - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **Framer Motion 10.16** - –∞–Ω–∏–º–∞—Ü–∏–∏
- **Lucide React** - –∏–∫–æ–Ω–∫–∏
- **React Hot Toast** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Axios 1.6** - HTTP –∫–ª–∏–µ–Ω—Ç
- **Telegram WebApp API** - –Ω–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### Backend
- **Node.js 20+** + **Express 4.18** + **TypeScript 5.3**
- **PostgreSQL 16** + **Prisma 5.7** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ ORM
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **node-telegram-bot-api** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot
- **Winston** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Helmet + CORS + Rate Limiting** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### DevOps
- **PM2** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- **Nginx** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- **npm workspaces** - –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
shop/
‚îú‚îÄ‚îÄ frontend/              # React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/          # API –∫–ª–∏–µ–Ω—Ç—ã (auth, product, cart, user, bonus)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/        # –°—Ç—Ä–∞–Ω–∏—Ü—ã (Dashboard, Catalog, Cart, Profile, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (BottomNav, ProductOptionsModal, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/        # Zustand —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (authStore)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/        # –•—É–∫–∏ (useTelegramApp)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.css     # Tailwind + Telegram theme –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ä–æ—É—Ç–∏–Ω–≥–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite —Å proxy
‚îÇ   ‚îî‚îÄ‚îÄ tailwind.config.js # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞ Telegram
‚îú‚îÄ‚îÄ backend/              # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (auth, user, product, cart, bonus)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/       # Express –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/   # Middleware (auth, errorHandler)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/       # –ö–æ–Ω—Ñ–∏–≥ (database, telegram, logger)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Express
‚îÇ   ‚îî‚îÄ‚îÄ prisma/
‚îÇ       ‚îî‚îÄ‚îÄ schema.prisma # –°—Ö–µ–º–∞ –ë–î
‚îî‚îÄ‚îÄ package.json          # Root workspace –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üé® –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞

### Telegram Theme Integration
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–Ω–∞—Ç–∏–≤–Ω—É—é —Ç–µ–º—É Telegram** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–≤–µ—Ç–ª–æ–π/—Ç–µ–º–Ω–æ–π —Ç–µ–º—ã:

```css
/* CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Telegram */
--tg-theme-bg-color
--tg-theme-text-color
--tg-theme-hint-color
--tg-theme-link-color
--tg-theme-button-color
--tg-theme-button-text-color
--tg-theme-secondary-bg-color
```

### Tailwind Custom Colors
```javascript
// tailwind.config.js
colors: {
  'tg-bg': 'var(--tg-theme-bg-color)',
  'tg-text': 'var(--tg-theme-text-color)',
  'tg-hint': 'var(--tg-theme-hint-color)',
  'tg-link': 'var(--tg-theme-link-color)',
  'tg-button': 'var(--tg-theme-button-color)',
  'tg-button-text': 'var(--tg-theme-button-text-color)',
  'tg-secondary-bg': 'var(--tg-theme-secondary-bg-color)',
}
```

### UI –ü—Ä–∏–Ω—Ü–∏–ø—ã
- **Mobile-first** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏** - Framer Motion –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- **Haptic feedback** - —Ç–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å Telegram
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö

## üîë –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏

1. **Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram WebApp
2. **–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –ø–æ–∏—Å–∫, –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤
3. **–ö–æ—Ä–∑–∏–Ω–∞** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ, –≤—ã–±–æ—Ä —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, –ø–æ–¥—Å—á–µ—Ç –∏—Ç–æ–≥–∞
4. **–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏** - –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤, –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
5. **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ Telegram, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
6. **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã

## üöÄ –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –í–∞–∂–Ω–æ! ‚ö†Ô∏è
- **–ù–ò–ö–û–ì–î–ê –Ω–µ –∑–∞–ø—É—Å–∫–∞–π `npm run dev`** - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª—è–π –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç –≤ Git**

### Build –∫–æ–º–∞–Ω–¥—ã
```bash
# –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (frontend + backend)
npm run build

# –°–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ frontend
npm run build:frontend

# –°–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ backend
npm run build:backend
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```bash
# TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run build  # –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
**‚ö†Ô∏è –ù–ï –í–´–ü–û–õ–ù–Ø–ô —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã - —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–≤–∞–π .md —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏!**

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è, —Å–æ–∑–¥–∞–π —Ñ–∞–π–ª `migration-[–¥–∞—Ç–∞]-[–æ–ø–∏—Å–∞–Ω–∏–µ].md` —Å —Ç–∞–∫–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏:
```markdown
# –ú–∏–≥—Ä–∞—Ü–∏—è: [–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π]

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend:
   ```bash
   cd backend
   ```

2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
   ```bash
   npx prisma migrate dev --name –Ω–∞–∑–≤–∞–Ω–∏–µ_–º–∏–≥—Ä–∞—Ü–∏–∏
   ```

3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client:
   ```bash
   npx prisma generate
   ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
   ```bash
   npx prisma studio
   ```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ:
[–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ schema.prisma]
```

## üì° API Endpoints

**Base URL**: `https://vapekhv.live/api`

### Authentication
- `POST /auth/telegram` - –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram WebApp
- `GET /auth/verify` - –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞

### Products
- `GET /categories` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GET /products` - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã: categoryId, search, featured)
- `GET /products/:id` - –¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞

### Cart
- `GET /cart` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
- `POST /cart/add` - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
- `PUT /cart/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `DELETE /cart/:id` - —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
- `DELETE /cart` - –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É

### User
- `GET /users/profile` - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /users/profile` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### Bonus
- `GET /bonus` - –±–∞–ª–∞–Ω—Å –∏ –∏—Å—Ç–æ—Ä–∏—è –±–æ–Ω—É—Å–æ–≤
- `POST /bonus/calculate` - —Ä–∞—Å—á–µ—Ç –±–æ–Ω—É—Å–æ–≤ –¥–ª—è –∑–∞–∫–∞–∑–∞

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Prisma)

- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Telegram ID, –±–æ–Ω—É—Å—ã, –ø—Ä–æ—Ñ–∏–ª—å)
- **Product** - —Ç–æ–≤–∞—Ä—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏)
- **Category** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- **CartItem** - —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
- **Order** - –∑–∞–∫–∞–∑—ã (—Å—Ç–∞—Ç—É—Å, —Å—É–º–º–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã)
- **OrderItem** - —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ
- **BonusTransaction** - –∏—Å—Ç–æ—Ä–∏—è –±–æ–Ω—É—Å–æ–≤ (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ)
- **ProductCharacteristic** - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞ (–≤–∫—É—Å, —Ä–∞–∑–º–µ—Ä)
- **ProductVariant** - –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–∞ (SKU, —Ü–µ–Ω–∞, –æ—Å—Ç–∞—Ç–æ–∫)

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

1. Frontend –ø–æ–ª—É—á–∞–µ—Ç `initData` –∏–∑ Telegram WebApp API
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `POST /auth/telegram`
3. Backend –ø–∞—Ä—Å–∏—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å—å Telegram
4. –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
6. Frontend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ Zustand store (localStorage)
7. Axios interceptor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `Authorization: Bearer {token}`

## üéØ State Management

### Client State (Zustand)
- **authStore** - JWT —Ç–æ–∫–µ–Ω, –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **Persistence** - –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage

### Server State (React Query)
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - 5 –º–∏–Ω—É—Ç stale time
- **Auto refetch** - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (1 retry)
- **Query keys**: `['categories']`, `['products']`, `['cart']`, `['profile']`
- **Mutations** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üåê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Frontend (.env)
```env
VITE_API_URL=https://vapekhv.live/api
VITE_APP_NAME=VapeKHV
```

### Backend (.env)
```env
NODE_ENV=production
PORT=3000
DOMAIN=vapekhv.live
DATABASE_URL="postgresql://user:password@localhost:5432/vapekhv_db?schema=public"
TELEGRAM_BOT_TOKEN=your_bot_token
JWT_SECRET=your_secret_key
JWT_EXPIRES_IN=7d
FRONTEND_URL=https://vapekhv.live
```

## üì¶ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```
/var/www/vapekhv/        # Frontend (dist —Ñ–∞–π–ª—ã)
/home/user/shop/         # Backend + –∏—Å—Ö–æ–¥–Ω–∏–∫–∏
```

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è
1. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π: `git add . && git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ"`
2. –ü—É—à –Ω–∞ GitHub: `git push`
3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç `./deploy.sh`

## üé® UI/UX Guidelines

### –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫**: –≤—Å–µ –∫–Ω–æ–ø–∫–∏ (+, -, "–î–æ–±–∞–≤–∏—Ç—å") –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
- **–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Ñ–æ—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **Hover —ç—Ñ—Ñ–µ–∫—Ç—ã**: –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: Framer Motion –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
- –ò—Å–ø–æ–ª—å–∑—É–π **—Ç–æ–ª—å–∫–æ Telegram theme –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`tg-*` –∫–ª–∞—Å—Å—ã)
- –ù–µ —Ö–∞—Ä–¥–∫–æ–¥—å —Ü–≤–µ—Ç–∞ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ —Ç–µ–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–ª—è –∞–∫—Ü–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π `tg-button` –∏ `tg-link`

### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto`
- Responsive —Ä–∞–∑–º–µ—Ä—ã —á–µ—Ä–µ–∑ Tailwind (`text-sm`, `text-lg`, etc.)
- –û—Ç—Å—Ç—É–ø—ã: –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ (`p-4`, `mb-4`, etc.)

## üêõ –û—Ç–ª–∞–¥–∫–∞

### Frontend –æ—à–∏–±–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript
cd frontend
npm run build

# –õ–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# Telegram WebApp API errors –±—É–¥—É—Ç –≤ console
```

### Backend –æ—à–∏–±–∫–∏
```bash
# –õ–æ–≥–∏ —á–µ—Ä–µ–∑ Winston
tail -f backend/logs/error.log

# PM2 –ª–æ–≥–∏
pm2 logs vapekhv-backend
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
psql -U postgres -d vapekhv_db

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü
\dt

# Prisma Studio (GUI) - —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd backend
npx prisma studio
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `frontend/src/api/client.ts` | Axios –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å interceptors |
| `frontend/src/hooks/useTelegramApp.ts` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram WebApp |
| `frontend/src/store/authStore.ts` | Zustand auth store |
| `backend/src/middleware/auth.ts` | JWT –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `backend/src/config/telegram.ts` | –ü–∞—Ä—Å–∏–Ω–≥ Telegram initData |
| `backend/prisma/schema.prisma` | –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `frontend/tailwind.config.js` | –ö–∞—Å—Ç–æ–º–Ω—ã–µ Telegram —Ü–≤–µ—Ç–∞ |

## ‚ö°Ô∏è Performance

- **Code splitting**: Manual chunks –¥–ª—è React vendor –∫–æ–¥–∞
- **Query caching**: React Query —Å 5 –º–∏–Ω stale time
- **Lazy loading**: React.lazy –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Image optimization**: –°–∂–∞—Ç–∏–µ –Ω–∞ –±–µ–∫–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Helmet** - –∑–∞—â–∏—Ç–∞ HTTP headers
- **CORS** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ origins
- **Rate Limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- **JWT** - —Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º (7 –¥–Ω–µ–π)
- **Telegram signature validation** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ initData
- **Prisma** - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection

## üìù –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –∫–æ–¥–µ

### TypeScript
- –ò—Å–ø–æ–ª—å–∑—É–π **—Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é** (`strict: true`)
- –ò–∑–±–µ–≥–∞–π `any` - –∏—Å–ø–æ–ª—å–∑—É–π `unknown` –∏–ª–∏ generic types
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### React
- **Functional components** + hooks
- **React Query** –¥–ª—è server state, **Zustand** –¥–ª—è client state
- Props –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è (`useMemo`, `useCallback`) –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

### Styling
- **Tailwind classes** –≤–º–µ—Å—Ç–æ inline styles
- **Telegram theme variables** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- Mobile-first –ø–æ–¥—Ö–æ–¥ (`sm:`, `md:`, `lg:` breakpoints)

### Git
- –ö–æ–º–º–∏—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- Conventional commits: `feat:`, `fix:`, `refactor:`, `docs:`
- –í–µ—Ç–∫–∏: `feature/–Ω–∞–∑–≤–∞–Ω–∏–µ`, `bugfix/–Ω–∞–∑–≤–∞–Ω–∏–µ`
- **–ü–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç!**

## üö® –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. ‚ùå **–ù–ï –∑–∞–ø—É—Å–∫–∞–π `npm run dev`** –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–∏
3. ‚ùå **–ù–ï –≤—ã–ø–æ–ª–Ω—è–π –∫–æ–º–∞–Ω–¥—ã –º–∏–≥—Ä–∞—Ü–∏–π –ë–î** - —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–≤–∞–π .md —Ñ–∞–π–ª—ã —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
4. ‚úÖ **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** - `git add . && git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ"`
5. ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π `npm run build`** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞
6. ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–π –≤ Telegram WebApp** - –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
7. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–π —Ç–µ–º–Ω—É—é —Ç–µ–º—É** - –∏—Å–ø–æ–ª—å–∑—É–π Telegram –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
8. ‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ UI** - –∫–Ω–æ–ø–∫–∏ –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö
9. ‚úÖ **–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã** - –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
10. ‚úÖ **TypeScript —Å—Ç—Ä–æ–≥–∏–π** - –∏—Å–ø—Ä–∞–≤–ª—è–π –≤—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤

## üîß Git Workflow (MacBook ‚Üí Server)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
1. –°–æ–∑–¥–∞–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –î–æ–±–∞–≤—å remote: `git remote add origin https://github.com/username/vapekhv.git`
3. Push: `git push -u origin main`

### Workflow –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. **–ù–∞ MacBook**: 
   - –í–Ω–æ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - `git add .`
   - `git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è"`
   - `git push`
2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ**: pull –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –¥–µ–ø–ª–æ–π –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `./deploy.sh`

### –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ –¥–ª—è MacBook!)
```bash
#!/bin/bash
# deploy.sh - –∑–∞–ø—É—Å–∫–∞–π –¢–û–õ–¨–ö–û –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

echo "üîÑ Pulling latest changes..."
git pull origin main

echo "üì¶ Installing dependencies..."
npm install  # –≠—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

echo "üèóÔ∏è Building project..."
npm run build

echo "üìÅ Deploying frontend..."
sudo cp -r frontend/dist/* /var/www/vapekhv/
sudo systemctl reload nginx

echo "üîÑ Restarting backend..."
pm2 restart vapekhv-backend

echo "‚úÖ Deployment complete!"
```

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è VapeKHV Telegram Web App**
